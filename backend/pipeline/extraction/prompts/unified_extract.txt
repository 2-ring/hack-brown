Extract all calendar events from the input below.

A calendar event is anything someone would put on a calendar: meetings, classes, exams, appointments, deadlines, parties, flights, office hours, etc. Ignore past events, opinions, and vague intentions ("I should work out more").

First, write an **input_summary**: 1-2 sentences describing what the user provided and what it contains — the source type, subject matter, and kinds of events. This summary will be passed to later pipeline stages that don't see the raw input. Be specific about the subject (course codes, people, destinations) so downstream stages have the context they need.

**Date formatting** (applies to all date fields: start_date, end_date, excluded_dates): Natural language date string ("tomorrow", "next Tuesday", "October 20, 2025"). Must specify a specific day without ANY ambiguity, for example "9th of October this year" or "23th of October, 2000" not just "9th of October." If no year mentioned add "this year". Use relevant document context (e.g. "Fall 2025" syllabus → "October 20, 2025"). Null if no date mentioned.

For each event, output:

- **summary**: Title in Title Case, 2-5 words. Preserve course codes ("CSCI 0500 Lecture"). Add context when helpful ("Dinner with Sarah"). Fix typos.
- **start_date**: When the event starts. For recurring events, the first occurrence.
- **end_date**: When the event ends. Multi-day events: the last day. Recurring events: when they stop. Null for single-day or open-ended events.
- **start_time**: Time as stated ("3pm", "noon", "14:00"). From ranges: "3-5pm" → "3pm". Null for all-day events or if no time mentioned.
- **end_time**: Only if explicitly stated ("3-5pm" → "5pm"). Never infer an end time. Null if not mentioned.
- **location**: Physical places only ("CIT 368", "Starbucks"). Virtual locations go in description instead. Null if none.
- **description**: Context beyond the title — people involved, prep notes, URLs, exam rules. Don't repeat the title. Null if nothing to add.
- **is_all_day**: True for birthdays, holidays, deadlines, trips with no time. False otherwise.
- **recurrence**: RRULE pattern strings for repeating events: ["RRULE:FREQ=WEEKLY;BYDAY=MO,WE"]. Do NOT include UNTIL — use end_date instead. Null for one-time events.
- **excluded_dates**: Dates to skip in a recurring event (holidays, breaks, cancellations). One date per entry: ["November 26, 2025", "November 28, 2025"]. For a range of skipped dates, list each date individually. Null for one-time events.

Key behaviors:

- **Conversations**: Follow the negotiation to its conclusion. "Lunch tomorrow?" → "Actually dinner" → "Yes, 6:15, Ararat" = extract dinner only (the agreed plan).
- **Dedup**: Same event described in multiple places = extract once, using the most specific version.
- **Context**: Use surrounding info to fill in gaps. Office hours "after lecture" when lecture ends 4:20pm → start_time "4:20 pm". Course code in syllabus header applies to all events below it.
- **Splitting**: "Meeting Mon and Wed 3-4pm" = 1 recurring event. "Midterm Oct 20, Final Dec 20" = 2 separate events.
- **Dates/times as strings**: Output natural language, not ISO timestamps. "Tomorrow at 2pm" → start_date: "tomorrow", start_time: "2pm".
- **Recurring events**: start_date = first occurrence. end_date = when they stop. Use excluded_dates for skipped dates.
- **Don't hallucinate**: If it's not in the input, leave it null.
- **Zero events**: The user submitted this input expecting calendar events, so investigate anything that could possibly be interpreted as an event before returning an empty list.

Examples:

"hey, won't be at the gym tomorrow bc I have to take Max to the vet at 4. also did u see the game last night??"
→ summary: "Vet Appointment", start_date: "tomorrow", start_time: "4pm", description: "Taking Max"
(Not extracted: gym — user is skipping, not attending; game last night — past event. end_time not inferred.)

"This week: oil change Tuesday, therapy Wed 4-5pm, Jake's birthday Thursday, grant proposal due Friday"
→ summary: "Oil Change", start_date: "this Tuesday", is_all_day: false
→ summary: "Therapy", start_date: "this Wednesday", start_time: "4pm", end_time: "5pm"
→ summary: "Jake's Birthday", start_date: "this Thursday", is_all_day: true
→ summary: "Grant Proposal Due", start_date: "this Friday", is_all_day: true
(end_time only on therapy — "4-5pm" states it explicitly. Birthday + deadline = all-day. Oil change has no time but is NOT all-day.)

Text conversation with Priya: "Brunch Sunday?" ... "11?" ... "Could we do 11:30? I have a thing in the morning" ... "Works for me. Blue State?" ... "See you there!"
→ summary: "Brunch with Priya", start_date: "this Sunday", start_time: "11:30am", location: "Blue State"
(Followed negotiation to conclusion: 11 → 11:30. "Thing in the morning" too vague to extract. end_time not inferred.)

Syllabus header: "PHYS 0070 — Analytical Mechanics, Spring 2026 (Jan 28 – May 8)"
"Lab: Fridays 2:00-3:50pm, Barus & Holley 166. No lab Feb 20, Apr 3, or Apr 10."
→ summary: "PHYS 0070 Lab", start_date: "January 30, 2026", end_date: "May 8, 2026", start_time: "2:00 pm", end_time: "3:50 pm", location: "Barus & Holley 166", recurrence: ["RRULE:FREQ=WEEKLY;BYDAY=FR"], excluded_dates: ["February 20, 2026", "April 3, 2026", "April 10, 2026"]
(start_date = first Friday after semester starts Jan 28. Course code from header → title. Exclusions listed individually.)

Flight booking:
"United UA 2381: JFK → LAX, Sat Apr 12, dep 7:45 AM, arr 11:10 AM
United UA 892: LAX → JFK, Thu Apr 17, dep 6:30 PM, arr Fri Apr 18 2:52 AM"
→ summary: "Flight JFK to LAX", start_date: "April 12 this year", start_time: "7:45am", end_time: "11:10am", location: "John F. Kennedy International Airport", description: "United UA 2381"
→ summary: "Flight LAX to JFK", start_date: "April 17 this year", start_time: "6:30pm", end_time: "2:52am", location: "Los Angeles International Airport", description: "United UA 892"
(Arrival = explicit end_time. "This year" added since no year in input. Location = departing airport — where the user physically goes. Full official name used when abundantly obvious from context; if any ambiguity, leave as stated.)

Email — "Subject: Re: Q3 Planning

Great progress on the launch last week! Budget review is confirmed for next Tuesday 2-3:30pm in Room 302. Zoom backup: https://zoom.us/j/98765. Please review the slides beforehand.

Also, Lisa mentioned possibly organizing a team outing in March — details TBD."
→ summary: "Budget Review", start_date: "next Tuesday", start_time: "2pm", end_time: "3:30pm", location: "Room 302", description: "Review slides beforehand. Zoom fallback: https://zoom.us/j/98765"
(Not extracted: launch last week — past; team outing — vague intention with "TBD". Zoom link → description, not location.)
