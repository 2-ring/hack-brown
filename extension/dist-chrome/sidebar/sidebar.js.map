{
  "version": 3,
  "sources": ["../../compat/detect.ts", "../../compat/storage.ts", "../../compat/notifications.ts", "../../compat/panel.ts", "../../compat/polling.ts", "../../theme.ts", "../../sidebar/sidebar.ts"],
  "sourcesContent": ["// Feature detection for cross-browser compatibility.\n// All branching in the compat layer uses these flags \u2014 never browser sniffing.\n\ndeclare const browser: typeof chrome | undefined;\n\nconst _chrome = globalThis.chrome;\n\n/** Firefox exposes `browser.*` with native Promise support */\nexport const hasNativeBrowserAPI = typeof browser !== 'undefined';\n\n/** The base API object \u2014 Firefox `browser` or Chrome/Safari `chrome` */\nexport const api: typeof chrome = hasNativeBrowserAPI\n  ? (browser as typeof chrome)\n  : _chrome;\n\n/** chrome.sidePanel (Chrome 114+) */\nexport const hasSidePanel =\n  typeof _chrome !== 'undefined' && 'sidePanel' in _chrome;\n\n/** browser.sidebarAction (Firefox) */\nexport const hasSidebarAction =\n  typeof browser !== 'undefined' &&\n  typeof (browser as any).sidebarAction?.open === 'function';\n\n/** chrome.storage.session (Chrome 102+, Firefox 115+) */\nexport const hasSessionStorage =\n  typeof _chrome !== 'undefined' &&\n  typeof _chrome.storage !== 'undefined' &&\n  'session' in _chrome.storage;\n\n/** chrome.notifications (not available in Safari extensions) */\nexport const hasNotifications =\n  typeof _chrome !== 'undefined' && 'notifications' in _chrome;\n\n/** chrome.action.openPopup() (Chrome 127+, Firefox 127+) */\nexport const hasOpenPopup =\n  typeof _chrome !== 'undefined' &&\n  typeof _chrome.action?.openPopup === 'function';\n\n/** chrome.alarms (all MV3 browsers) */\nexport const hasAlarms =\n  typeof _chrome !== 'undefined' && 'alarms' in _chrome;\n", "// Unified storage API with a fallback for browsers without chrome.storage.session.\n// Safari (older versions) lacks session storage \u2014 we emulate it by namespacing\n// keys in local storage with a \"__session:\" prefix and clearing on startup.\n\nimport { api, hasSessionStorage } from './detect';\n\nconst SESSION_PREFIX = '__session:';\n\n// Minimal interface for the storage methods we actually use.\n// Avoids fighting with chrome.storage.StorageArea's complex overloads.\nexport interface SimpleStorageArea {\n  get(keys: string | string[] | null, callback: (items: Record<string, any>) => void): void;\n  set(items: Record<string, any>, callback?: () => void): void;\n  remove(keys: string | string[], callback?: () => void): void;\n  clear(callback?: () => void): void;\n  onChanged: {\n    addListener(callback: (changes: Record<string, chrome.storage.StorageChange>, areaName?: string) => void): void;\n  };\n}\n\nfunction prefixKeys(keys: string | string[] | Record<string, any>): string[] {\n  if (typeof keys === 'string') return [`${SESSION_PREFIX}${keys}`];\n  if (Array.isArray(keys)) return keys.map((k) => `${SESSION_PREFIX}${k}`);\n  return Object.keys(keys).map((k) => `${SESSION_PREFIX}${k}`);\n}\n\nfunction prefixRecord(items: Record<string, any>): Record<string, any> {\n  const out: Record<string, any> = {};\n  for (const [k, v] of Object.entries(items)) {\n    out[`${SESSION_PREFIX}${k}`] = v;\n  }\n  return out;\n}\n\nfunction unprefixRecord(result: Record<string, any>): Record<string, any> {\n  const out: Record<string, any> = {};\n  for (const [k, v] of Object.entries(result)) {\n    if (k.startsWith(SESSION_PREFIX)) {\n      out[k.slice(SESSION_PREFIX.length)] = v;\n    }\n  }\n  return out;\n}\n\n// ===== Session fallback change listeners =====\n\ntype StorageChangeCallback = (\n  changes: Record<string, chrome.storage.StorageChange>,\n  areaName?: string,\n) => void;\n\nconst sessionFallbackListeners = new Set<StorageChangeCallback>();\nlet localChangeListenerInstalled = false;\n\nfunction ensureLocalChangeListener(): void {\n  if (localChangeListenerInstalled) return;\n  localChangeListenerInstalled = true;\n\n  api.storage.local.onChanged.addListener((changes) => {\n    if (sessionFallbackListeners.size === 0) return;\n\n    const sessionChanges: Record<string, chrome.storage.StorageChange> = {};\n    let hasChanges = false;\n\n    for (const [key, change] of Object.entries(changes)) {\n      if (key.startsWith(SESSION_PREFIX)) {\n        sessionChanges[key.slice(SESSION_PREFIX.length)] = change;\n        hasChanges = true;\n      }\n    }\n\n    if (hasChanges) {\n      for (const listener of sessionFallbackListeners) {\n        listener(sessionChanges, 'session');\n      }\n    }\n  });\n}\n\n// ===== Fallback implementation =====\n\nconst sessionFallback: SimpleStorageArea = {\n  get(keys, callback) {\n    const prefixed = keys === null ? null : prefixKeys(keys);\n    api.storage.local.get(prefixed, (result) => {\n      callback(unprefixRecord(result));\n    });\n  },\n\n  set(items, callback) {\n    if (callback) {\n      api.storage.local.set(prefixRecord(items), callback);\n    } else {\n      api.storage.local.set(prefixRecord(items));\n    }\n  },\n\n  remove(keys, callback) {\n    const prefixed = prefixKeys(keys);\n    if (callback) {\n      api.storage.local.remove(prefixed, callback);\n    } else {\n      api.storage.local.remove(prefixed);\n    }\n  },\n\n  clear(callback) {\n    api.storage.local.get(null, (all) => {\n      const sessionKeys = Object.keys(all).filter((k) => k.startsWith(SESSION_PREFIX));\n      if (sessionKeys.length > 0) {\n        if (callback) {\n          api.storage.local.remove(sessionKeys, callback);\n        } else {\n          api.storage.local.remove(sessionKeys);\n        }\n      } else {\n        callback?.();\n      }\n    });\n  },\n\n  onChanged: {\n    addListener(callback: StorageChangeCallback) {\n      ensureLocalChangeListener();\n      sessionFallbackListeners.add(callback);\n    },\n  },\n};\n\n/** Clear ephemeral session keys on service worker startup (mimics session storage behavior). */\nexport function clearSessionFallback(): void {\n  if (!hasSessionStorage) {\n    sessionFallback.clear();\n  }\n}\n\n// ===== Exported storage object =====\n\n// Wrap the real chrome.storage.session to match our SimpleStorageArea interface.\n// This avoids type issues with chrome's complex overloaded signatures.\nfunction wrapNativeSession(): SimpleStorageArea {\n  const native = api.storage.session;\n  return {\n    get(keys, callback) { native.get(keys, callback); },\n    set(items, callback) { if (callback) native.set(items, callback); else native.set(items); },\n    remove(keys, callback) { if (callback) native.remove(keys, callback); else native.remove(keys); },\n    clear(callback) { if (callback) native.clear(callback); else native.clear(); },\n    onChanged: native.onChanged,\n  };\n}\n\nexport const storage = {\n  local: api.storage.local,\n  session: hasSessionStorage ? wrapNativeSession() : sessionFallback,\n  onChanged: api.storage.onChanged,\n};\n", "// Cross-browser notification abstraction.\n// Safari extensions lack chrome.notifications \u2014 gracefully no-ops there.\n\nimport { api, hasNotifications } from './detect';\n\nexport const notifications = {\n  create(\n    id: string,\n    options: { type: 'basic'; iconUrl: string; title: string; message: string },\n  ): void {\n    if (hasNotifications) {\n      api.notifications.create(id, options);\n    }\n  },\n\n  onClicked: hasNotifications\n    ? api.notifications.onClicked\n    : { addListener: (_cb: (id: string) => void) => {} },\n};\n", "// Unified side panel adapter.\n// Chrome \u2192 chrome.sidePanel.\n// Firefox \u2192 browser.sidebarAction.\n// Safari \u2192 browser.sidebarAction (Safari supports it in MV3).\n\nimport { api, hasSidePanel, hasSidebarAction } from './detect';\nimport { storage } from './storage';\n\ndeclare const browser: typeof chrome | undefined;\n\nexport interface PanelAdapter {\n  open(options: { windowId?: number; sessionId?: string }): Promise<void>;\n  isSupported: boolean;\n}\n\nfunction chromeSidePanel(): PanelAdapter {\n  return {\n    isSupported: true,\n    async open({ windowId, sessionId }) {\n      if (sessionId) {\n        await new Promise<void>((resolve) => {\n          storage.session.set({ sidebarSessionId: sessionId }, resolve);\n        });\n      }\n      if (windowId) {\n        await (api.sidePanel as any).open({ windowId });\n      }\n    },\n  };\n}\n\nfunction firefoxSidebar(): PanelAdapter {\n  return {\n    isSupported: true,\n    async open({ sessionId }) {\n      // sidebarAction.open() MUST be called before any await \u2014 Firefox loses\n      // the user-action context after an async gap (Bugzilla #1800401).\n      await (browser as any).sidebarAction.open();\n      if (sessionId) {\n        storage.session.set({ sidebarSessionId: sessionId });\n      }\n    },\n  };\n}\n\nexport const panel: PanelAdapter = hasSidePanel\n  ? chromeSidePanel()\n  : firefoxSidebar();\n", "// Alarm-based polling that survives service worker restarts.\n// Falls back to setInterval for contexts where alarms aren't available\n// (e.g., if permission is missing), but alarms are the primary mechanism.\n\nimport { api, hasAlarms } from './detect';\n\nconst ALARM_PREFIX = 'poll:';\nconst POLL_PERIOD_MINUTES = 1 / 30; // ~2 seconds (Chrome enforces 30s min in production)\n// Chrome enforces a minimum of 30s for alarm periods. For faster polling,\n// we use a single alarm as a keep-alive and do rapid polling via setTimeout\n// within the alarm handler. The alarm ensures the service worker stays alive.\n\nconst RAPID_POLL_MS = 2000;\nconst KEEPALIVE_ALARM = 'poll-keepalive';\n\ntype PollCallback = (sessionId: string) => Promise<void>;\n\nlet pollCallback: PollCallback | null = null;\nlet activePolls = new Set<string>();\nlet rapidTimers = new Map<string, ReturnType<typeof setTimeout>>();\n\n/** Register the callback that executes on each poll tick. Call once at startup. */\nexport function onPollTick(callback: PollCallback): void {\n  pollCallback = callback;\n\n  if (hasAlarms) {\n    api.alarms.onAlarm.addListener((alarm) => {\n      if (alarm.name === KEEPALIVE_ALARM) {\n        // Keepalive fired \u2014 the rapid setTimeout timers do the actual work.\n        // This just ensures the service worker stays alive.\n      }\n    });\n  }\n}\n\n/** Start polling a session. */\nexport function startPolling(sessionId: string): void {\n  activePolls.add(sessionId);\n  ensureKeepalive();\n  scheduleRapidPoll(sessionId);\n}\n\n/** Stop polling a session. */\nexport function stopPolling(sessionId: string): void {\n  activePolls.delete(sessionId);\n  const timer = rapidTimers.get(sessionId);\n  if (timer) {\n    clearTimeout(timer);\n    rapidTimers.delete(sessionId);\n  }\n  if (activePolls.size === 0) {\n    clearKeepalive();\n  }\n}\n\n/** Stop all active polls. */\nexport function stopAllPolling(): void {\n  for (const id of activePolls) {\n    const timer = rapidTimers.get(id);\n    if (timer) clearTimeout(timer);\n  }\n  activePolls.clear();\n  rapidTimers.clear();\n  clearKeepalive();\n}\n\n/** Check if a session is currently being polled. */\nexport function isPolling(sessionId: string): boolean {\n  return activePolls.has(sessionId);\n}\n\nfunction scheduleRapidPoll(sessionId: string): void {\n  if (!activePolls.has(sessionId)) return;\n\n  const tick = async () => {\n    if (!activePolls.has(sessionId) || !pollCallback) return;\n    try {\n      await pollCallback(sessionId);\n    } catch {\n      // Error handling is in the callback\n    }\n    // Schedule next tick if still active\n    if (activePolls.has(sessionId)) {\n      rapidTimers.set(sessionId, setTimeout(tick, RAPID_POLL_MS));\n    }\n  };\n\n  // First tick immediately\n  tick();\n}\n\nfunction ensureKeepalive(): void {\n  if (hasAlarms) {\n    // Create a periodic alarm to keep the service worker alive.\n    // Chrome minimum is 30s for periodInMinutes, so we use delayInMinutes of 0.5\n    // and re-create on each fire.\n    api.alarms.get(KEEPALIVE_ALARM, (alarm) => {\n      if (!alarm) {\n        api.alarms.create(KEEPALIVE_ALARM, { periodInMinutes: 0.5 });\n      }\n    });\n  }\n}\n\nfunction clearKeepalive(): void {\n  if (hasAlarms) {\n    api.alarms.clear(KEEPALIVE_ALARM);\n  }\n}\n", "// Theme management for the browser extension.\n// Mirrors the frontend's ThemeProvider behavior: reads the user's theme_mode\n// preference ('light' | 'dark' | 'auto') and applies matching CSS variables.\n\nimport { storage } from './compat';\n\nexport type ThemeMode = 'light' | 'dark' | 'auto';\nexport type ResolvedTheme = 'light' | 'dark';\n\nconst STORAGE_KEY = 'themeMode';\n\n// ===== System preference detection =====\n\nfunction getSystemTheme(): ResolvedTheme {\n  return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n}\n\n// ===== Apply theme to document =====\n\nfunction applyTheme(resolved: ResolvedTheme): void {\n  document.documentElement.setAttribute('data-theme', resolved);\n}\n\n// ===== Resolve mode \u2192 actual theme =====\n\nfunction resolve(mode: ThemeMode): ResolvedTheme {\n  return mode === 'auto' ? getSystemTheme() : mode;\n}\n\n// ===== Public API =====\n\n/**\n * Initialize theming for a popup or sidebar page.\n * - Reads the stored theme_mode from storage.local\n * - Applies the resolved theme immediately\n * - Listens for storage changes (background updates theme_mode on auth)\n * - Listens for system theme changes when mode is 'auto'\n */\nexport function initTheme(): void {\n  // 1. Apply immediately from storage\n  storage.local.get(STORAGE_KEY, (result) => {\n    const mode: ThemeMode = result[STORAGE_KEY] || 'auto';\n    applyTheme(resolve(mode));\n  });\n\n  // 2. Listen for theme_mode changes in storage (e.g. background fetched new prefs)\n  storage.local.onChanged.addListener((changes) => {\n    if (changes[STORAGE_KEY]) {\n      const mode: ThemeMode = changes[STORAGE_KEY].newValue || 'auto';\n      applyTheme(resolve(mode));\n    }\n  });\n\n  // 3. Listen for OS-level theme changes (matters when mode === 'auto')\n  const mq = window.matchMedia('(prefers-color-scheme: dark)');\n  mq.addEventListener('change', () => {\n    storage.local.get(STORAGE_KEY, (result) => {\n      const mode: ThemeMode = result[STORAGE_KEY] || 'auto';\n      if (mode === 'auto') {\n        applyTheme(getSystemTheme());\n      }\n    });\n  });\n}\n", "import type { SessionRecord, CalendarEvent } from '../types';\nimport { initTheme } from '../theme';\nimport { api, storage } from '../compat';\n\nconst DROPCAL_URL = 'https://dropcal.ai';\n\n// ===== DOM Elements =====\n\nconst sidebarTitle = document.getElementById('sidebar-title')!;\nconst stateLoading = document.getElementById('state-loading')!;\nconst stateEvents = document.getElementById('state-events')!;\nconst stateError = document.getElementById('state-error')!;\nconst stateEmpty = document.getElementById('state-empty')!;\nconst skeletonList = document.getElementById('skeleton-list')!;\nconst eventsList = document.getElementById('events-list')!;\nconst errorMessage = document.getElementById('sidebar-error-message')!;\nconst btnBack = document.getElementById('btn-back')!;\nconst btnAddAll = document.getElementById('btn-add-all')!;\nconst btnOpenDropcal = document.getElementById('btn-open-dropcal')!;\n\nlet currentSessionId: string | null = null;\n\n// ===== State Display =====\n\nfunction showState(state: 'loading' | 'events' | 'error' | 'empty'): void {\n  stateLoading.classList.toggle('hidden', state !== 'loading');\n  stateEvents.classList.toggle('hidden', state !== 'events');\n  stateError.classList.toggle('hidden', state !== 'error');\n  stateEmpty.classList.toggle('hidden', state !== 'empty');\n}\n\n// ===== Skeleton Rendering =====\n\nfunction renderSkeletons(count: number): void {\n  skeletonList.innerHTML = '';\n  for (let i = 0; i < count; i++) {\n    const skeleton = document.createElement('div');\n    skeleton.className = 'skeleton-card';\n    skeleton.style.opacity = String(1 - i * 0.15);\n    skeletonList.appendChild(skeleton);\n  }\n}\n\n// ===== Event Rendering =====\n\nfunction formatTime(dateTimeStr: string): string {\n  const date = new Date(dateTimeStr);\n  return date.toLocaleTimeString('en-US', {\n    hour: 'numeric',\n    minute: '2-digit',\n    hour12: true,\n  });\n}\n\nfunction formatTimeRange(start: CalendarEvent['start'], end: CalendarEvent['end']): string {\n  if (start.date) {\n    return 'All day';\n  }\n  if (start.dateTime && end.dateTime) {\n    return `${formatTime(start.dateTime)} - ${formatTime(end.dateTime)}`;\n  }\n  return '';\n}\n\nfunction getEventDate(event: CalendarEvent): Date {\n  if (event.start.date && !event.start.dateTime) {\n    // Date-only strings (\"YYYY-MM-DD\") are parsed as UTC by JS,\n    // which shifts the day back in timezones behind UTC. Append\n    // T00:00:00 so it's treated as local midnight instead.\n    return new Date(event.start.date + 'T00:00:00');\n  }\n  return new Date(event.start.dateTime || '');\n}\n\nfunction groupEventsByDate(events: CalendarEvent[]): Map<string, CalendarEvent[]> {\n  const groups = new Map<string, CalendarEvent[]>();\n\n  const sorted = [...events].sort((a, b) => getEventDate(a).getTime() - getEventDate(b).getTime());\n\n  for (const event of sorted) {\n    const date = getEventDate(event);\n    const key = date.toDateString();\n    if (!groups.has(key)) {\n      groups.set(key, []);\n    }\n    groups.get(key)!.push(event);\n  }\n\n  return groups;\n}\n\n// Phosphor icon HTML (font-based)\nconst MAP_PIN_ICON = `<i class=\"ph-bold ph-map-pin\" style=\"font-size: 16px\"></i>`;\nconst EQUALS_ICON = `<i class=\"ph-bold ph-equals\" style=\"font-size: 16px\"></i>`;\n\nfunction renderEvents(events: CalendarEvent[]): void {\n  eventsList.innerHTML = '';\n\n  if (events.length === 0) {\n    showState('empty');\n    return;\n  }\n\n  const groups = groupEventsByDate(events);\n  let lastMonth = '';\n\n  groups.forEach((dateEvents, dateKey) => {\n    const date = new Date(dateKey);\n\n    // Month header\n    const monthYear = date.toLocaleDateString('en-US', {\n      month: 'long',\n      ...(date.getFullYear() !== new Date().getFullYear() && { year: 'numeric' }),\n    });\n\n    if (monthYear !== lastMonth) {\n      lastMonth = monthYear;\n      const monthHeader = document.createElement('div');\n      monthHeader.className = 'month-header';\n      monthHeader.innerHTML = `<h2 class=\"month-header-text\">${monthYear}</h2>`;\n      eventsList.appendChild(monthHeader);\n    }\n\n    // Date group\n    const dateGroup = document.createElement('div');\n    dateGroup.className = 'date-group';\n\n    // Date header (left column)\n    const today = new Date();\n    const isToday = date.toDateString() === today.toDateString();\n    const dayOfWeek = date.toLocaleDateString('en-US', { weekday: 'short' });\n    const dateNumber = date.getDate();\n\n    const dateHeader = document.createElement('div');\n    dateHeader.className = `date-header${isToday ? ' today' : ''}`;\n    dateHeader.innerHTML = `\n      <div class=\"date-day-label\">${dayOfWeek}</div>\n      <div class=\"date-circle\">\n        <span class=\"date-number\">${dateNumber}</span>\n      </div>\n    `;\n\n    // Events (right column)\n    const dateEventsDiv = document.createElement('div');\n    dateEventsDiv.className = 'date-events';\n\n    for (const event of dateEvents) {\n      const card = document.createElement('div');\n      card.className = 'event-card';\n\n      const calendarColor = event.calendarColor || '#1170C5';\n      card.style.borderLeftColor = calendarColor;\n      card.style.backgroundColor = `${calendarColor}12`;\n\n      const timeRange = formatTimeRange(event.start, event.end);\n\n      let html = `\n        <div class=\"event-card-title-row\">\n          <span class=\"event-card-title\">${escapeHtml(event.summary)}</span>\n          <span class=\"event-card-time\">(${timeRange})</span>\n        </div>\n      `;\n\n      if (event.location) {\n        html += `\n          <div class=\"event-card-meta\">\n            ${MAP_PIN_ICON}\n            <span>${escapeHtml(event.location)}</span>\n          </div>\n        `;\n      }\n\n      if (event.description) {\n        html += `\n          <div class=\"event-card-meta event-card-description\">\n            ${EQUALS_ICON}\n            <span>${escapeHtml(event.description)}</span>\n          </div>\n        `;\n      }\n\n      if (event.calendarName) {\n        html += `\n          <div class=\"event-calendar-badge\">\n            <span class=\"calendar-badge-dot\" style=\"background-color: ${calendarColor}\"></span>\n            <span class=\"calendar-badge-text\">${escapeHtml(event.calendarName)}</span>\n          </div>\n        `;\n      }\n\n      card.innerHTML = html;\n\n      // Click \u2192 open session on dropcal.ai\n      card.addEventListener('click', () => {\n        if (currentSessionId) {\n          api.runtime.sendMessage({\n            type: 'OPEN_SESSION',\n            sessionId: currentSessionId,\n          });\n        }\n      });\n\n      dateEventsDiv.appendChild(card);\n    }\n\n    dateGroup.appendChild(dateHeader);\n    dateGroup.appendChild(dateEventsDiv);\n    eventsList.appendChild(dateGroup);\n  });\n\n  showState('events');\n}\n\nfunction escapeHtml(text: string): string {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n// ===== Load Session =====\n\nfunction loadSession(sessionId: string): void {\n  currentSessionId = sessionId;\n\n  // Show loading skeletons\n  renderSkeletons(3);\n  showState('loading');\n\n  // Find session in history\n  storage.local.get('sessionHistory', (result) => {\n    const history = result.sessionHistory as { sessions: SessionRecord[] } | undefined;\n    const session = history?.sessions.find((s) => s.sessionId === sessionId);\n\n    if (!session) {\n      errorMessage.textContent = 'Session not found.';\n      showState('error');\n      return;\n    }\n\n    sidebarTitle.textContent = session.title || 'Events';\n\n    if (session.status === 'error') {\n      errorMessage.textContent = session.errorMessage || 'Processing failed.';\n      showState('error');\n      return;\n    }\n\n    if (session.status === 'polling') {\n      // Still processing \u2014 show skeletons, wait for updates\n      renderSkeletons(3);\n      showState('loading');\n      return;\n    }\n\n    if (session.events && session.events.length > 0) {\n      renderEvents(session.events);\n    } else {\n      showState('empty');\n    }\n\n    syncAddButton(session.addedToCalendar);\n  });\n}\n\nfunction syncAddButton(addedToCalendar: boolean): void {\n  if (addedToCalendar) {\n    btnAddAll.classList.add('added');\n    btnAddAll.innerHTML = `<i class=\"ph ph-check-circle btn-icon\" style=\"font-size: 18px\"></i> Added to calendar`;\n  } else {\n    btnAddAll.classList.remove('added');\n    btnAddAll.innerHTML = `<i class=\"ph-duotone ph-calendar-star btn-icon\" style=\"font-size: 18px\"></i> Add to Calendar`;\n  }\n}\n\n// ===== Buttons =====\n\nbtnBack.addEventListener('click', () => {\n  window.close();\n});\n\nbtnAddAll.addEventListener('click', () => {\n  if (!currentSessionId || btnAddAll.classList.contains('loading') || btnAddAll.classList.contains('added')) return;\n\n  const resetButton = () => {\n    btnAddAll.classList.remove('loading');\n    btnAddAll.innerHTML = `<i class=\"ph-duotone ph-calendar-star btn-icon\" style=\"font-size: 18px\"></i> Add to Calendar`;\n  };\n\n  btnAddAll.classList.add('loading');\n  btnAddAll.innerHTML = `<i class=\"ph ph-spinner btn-icon\" style=\"font-size: 18px\"></i> Adding...`;\n\n  try {\n    api.runtime.sendMessage(\n      { type: 'PUSH_ALL_EVENTS', sessionId: currentSessionId },\n      (response) => {\n        if (api.runtime.lastError) {\n          console.error('DropCal: sendMessage error', api.runtime.lastError);\n          resetButton();\n          return;\n        }\n        btnAddAll.classList.remove('loading');\n        if (response?.ok) {\n          btnAddAll.classList.add('added');\n          btnAddAll.innerHTML = `<i class=\"ph ph-check-circle btn-icon\" style=\"font-size: 18px\"></i> Added to calendar`;\n        } else {\n          resetButton();\n        }\n      },\n    );\n  } catch (err) {\n    console.error('DropCal: sendMessage threw', err);\n    resetButton();\n  }\n});\n\nbtnOpenDropcal.addEventListener('click', () => {\n  if (currentSessionId) {\n    api.runtime.sendMessage({\n      type: 'OPEN_SESSION',\n      sessionId: currentSessionId,\n    });\n    window.close();\n  }\n});\n\n// ===== Live Updates =====\n\nstorage.local.onChanged.addListener((changes) => {\n  if (changes.sessionHistory && currentSessionId) {\n    const history = changes.sessionHistory.newValue as { sessions: SessionRecord[] } | undefined;\n    const session = history?.sessions.find((s) => s.sessionId === currentSessionId);\n\n    if (session) {\n      sidebarTitle.textContent = session.title || 'Events';\n\n      if (session.status === 'processed' && session.events && session.events.length > 0) {\n        renderEvents(session.events);\n      } else if (session.status === 'error') {\n        errorMessage.textContent = session.errorMessage || 'Processing failed.';\n        showState('error');\n      }\n    }\n  }\n});\n\n// ===== Init =====\n\n// Apply theme\ninitTheme();\n\n// Read which session to display from session storage\nstorage.session.get('sidebarSessionId', (result) => {\n  const sessionId = result.sidebarSessionId as string | undefined;\n  if (sessionId) {\n    loadSession(sessionId);\n  } else {\n    showState('empty');\n  }\n});\n\n// Also listen for session changes (if popup opens a different session)\nstorage.session.onChanged.addListener((changes) => {\n  if (changes.sidebarSessionId) {\n    const newSessionId = changes.sidebarSessionId.newValue as string | undefined;\n    if (newSessionId && newSessionId !== currentSessionId) {\n      loadSession(newSessionId);\n    }\n  }\n});\n"],
  "mappings": "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",
  "names": ["_chrome", "hasNativeBrowserAPI", "api", "hasSidePanel", "hasSidebarAction", "hasSessionStorage", "hasNotifications", "hasOpenPopup", "hasAlarms", "SESSION_PREFIX", "prefixKeys", "keys", "k", "prefixRecord", "items", "out", "v", "unprefixRecord", "result", "sessionFallbackListeners", "localChangeListenerInstalled", "ensureLocalChangeListener", "api", "changes", "sessionChanges", "hasChanges", "key", "change", "listener", "sessionFallback", "callback", "prefixed", "all", "sessionKeys", "wrapNativeSession", "native", "api", "keys", "callback", "items", "storage", "hasSessionStorage", "sessionFallback", "notifications", "id", "options", "hasNotifications", "api", "_cb", "chromeSidePanel", "windowId", "sessionId", "resolve", "storage", "api", "firefoxSidebar", "panel", "hasSidePanel", "POLL_PERIOD_MINUTES", "STORAGE_KEY", "getSystemTheme", "applyTheme", "resolved", "resolve", "mode", "initTheme", "storage", "result", "changes", "sidebarTitle", "stateLoading", "stateEvents", "stateError", "stateEmpty", "skeletonList", "eventsList", "errorMessage", "btnBack", "btnAddAll", "btnOpenDropcal", "currentSessionId", "showState", "state", "renderSkeletons", "count", "i", "skeleton", "formatTime", "dateTimeStr", "formatTimeRange", "start", "end", "getEventDate", "event", "groupEventsByDate", "events", "groups", "sorted", "a", "b", "key", "MAP_PIN_ICON", "EQUALS_ICON", "renderEvents", "lastMonth", "dateEvents", "dateKey", "date", "monthYear", "monthHeader", "dateGroup", "today", "isToday", "dayOfWeek", "dateNumber", "dateHeader", "dateEventsDiv", "card", "calendarColor", "timeRange", "html", "escapeHtml", "api", "text", "div", "loadSession", "sessionId", "storage", "result", "session", "s", "syncAddButton", "addedToCalendar", "resetButton", "response", "err", "changes", "initTheme", "newSessionId"]
}
