<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=380">
  <link rel="stylesheet" href="popup.css">
  <title>DropCal</title>
</head>
<body>
  <div id="root">
    <!-- Shared file inputs -->
    <input type="file" id="file-input" hidden multiple accept="image/*,.pdf,.txt,.doc,.docx">
    <input type="file" id="image-input" hidden multiple accept="image/*">
    <input type="file" id="doc-input" hidden multiple accept=".pdf,.txt,.doc,.docx,.csv,.xls,.xlsx">

    <!-- ===== View: Auth ===== -->
    <div id="view-auth" class="view view-centered hidden">
      <img src="../icons/icon48.png" alt="DropCal" class="logo">
      <p class="signin-heading">Sign in to DropCal</p>
      <p class="signin-text">Sign in on dropcal.ai to start creating events from any page.</p>
      <button id="btn-signin" class="btn-cta">
        <!-- Phosphor SignIn duotone -->
        <svg class="btn-icon" width="20" height="20" viewBox="0 0 256 256" fill="currentColor">
          <path d="M128,40a88,88,0,1,0,88,88A88,88,0,0,0,128,40Zm0,144a56,56,0,1,1,56-56A56,56,0,0,1,128,184Z" opacity="0.2"/>
          <path d="M141.66,133.66l-40,40a8,8,0,0,1-11.32-11.32L116.69,136H24a8,8,0,0,1,0-16h92.69L90.34,93.66a8,8,0,0,1,11.32-11.32l40,40A8,8,0,0,1,141.66,133.66ZM192,32H136a8,8,0,0,0,0,16h56a8,8,0,0,1,8,8V200a8,8,0,0,1-8,8H136a8,8,0,0,0,0,16h56a24,24,0,0,0,24-24V56A24,24,0,0,0,192,32Z"/>
        </svg>
        Sign in
      </button>
    </div>

    <!-- Shared header (input, processing, feedback) -->
    <div id="popup-header" class="popup-header hidden">
      <img src="../icons/icon48.png" alt="DropCal" class="header-logo">
      <span class="header-title">DropCal</span>
    </div>

    <!-- ===== View: Input ===== -->
    <div id="view-input" class="view hidden">
      <!-- Drop zone with button grid -->
      <div id="drop-zone" class="drop-zone">
        <div class="drop-zone-content">
          <div class="icon-row">
            <!-- Left column -->
            <button id="btn-link" class="icon-circle btn-left-1" title="Paste link">
              <!-- Phosphor Link duotone -->
              <svg width="24" height="24" viewBox="0 0 256 256" fill="currentColor">
                <path d="M218.34,119.6,183.6,154.34a46.58,46.58,0,0,1-44.31,12.26c-.31.34-.62.67-.95,1L103.6,202.34A46.63,46.63,0,1,1,37.66,136.4L72.4,101.66A46.6,46.6,0,0,1,116.71,89.4c.31-.34.62-.67,1-1L152.4,53.66a46.63,46.63,0,0,1,65.94,65.94Z" opacity="0.2"/>
                <path d="M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,16,.45A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"/>
              </svg>
            </button>

            <button id="btn-images" class="icon-circle btn-left-2" title="Upload images">
              <!-- Phosphor Images duotone -->
              <svg width="24" height="24" viewBox="0 0 256 256" fill="currentColor">
                <path d="M224,56v82.06l-23.72-23.72a8,8,0,0,0-11.31,0L163.31,140,113.66,90.34a8,8,0,0,0-11.32,0L64,128.69V56a8,8,0,0,1,8-8H216A8,8,0,0,1,224,56Z" opacity="0.2"/>
                <path d="M216,40H72A16,16,0,0,0,56,56V72H40A16,16,0,0,0,24,88V200a16,16,0,0,0,16,16H184a16,16,0,0,0,16-16V184h16a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM72,56H216v62.75l-10.07-10.06a16,16,0,0,0-22.63,0l-20,20-44-44a16,16,0,0,0-22.62,0L72,109.37ZM184,200H40V88H56v80a16,16,0,0,0,16,16H184Zm32-32H72V132l36-36,49.66,49.66a8,8,0,0,0,11.31,0L194.63,120,216,141.38V168ZM160,84a12,12,0,1,1,12,12A12,12,0,0,1,160,84Z"/>
              </svg>
            </button>

            <button id="btn-files" class="icon-circle btn-left-3" title="Upload documents">
              <!-- Phosphor File duotone -->
              <svg width="24" height="24" viewBox="0 0 256 256" fill="currentColor">
                <path d="M208,88H152V32Z" opacity="0.2"/>
                <path d="M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"/>
              </svg>
            </button>

            <!-- Center button -->
            <button id="btn-center" class="icon-circle center" title="Upload">
              <!-- Phosphor ArrowFatUp bold -->
              <svg width="28" height="28" viewBox="0 0 256 256" fill="currentColor">
                <path d="M232.48,111.51l-96-96a12,12,0,0,0-17,0l-96,96A12,12,0,0,0,32,132H68v76a20,20,0,0,0,20,20h80a20,20,0,0,0,20-20V132h36a12,12,0,0,0,8.48-20.49ZM176,108a12,12,0,0,0-12,12v84H92V120a12,12,0,0,0-12-12H61l67-67,67,67Z"/>
              </svg>
            </button>

            <!-- Right column -->
            <button id="btn-capture" class="icon-circle btn-right-1" title="Capture page">
              <!-- Phosphor Globe -->
              <svg width="24" height="24" viewBox="0 0 256 256" fill="currentColor">
                <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm88,104a87.62,87.62,0,0,1-6.4,32.94l-44.7-27.49a15.92,15.92,0,0,0-6.24-2.23l-22.82-3.08a16.11,16.11,0,0,0-16,7.86h-8.72l-3.8-7.86a16,16,0,0,0-11.09-8.48L74.34,116l12.74-26.29a16,16,0,0,0-1.27-16.06l-3.75-5.51A87.46,87.46,0,0,1,128,56a88.44,88.44,0,0,1,13.8,1.08l-4.26,14.61a16,16,0,0,0,4.06,15.63l10.52,10.52a16,16,0,0,0,9.79,4.68l19.54,1.62L196,118.54A16.07,16.07,0,0,0,216,128ZM40,128A87.44,87.44,0,0,1,67,56.79L71,62.4,58.31,88.68a16,16,0,0,0,1.08,15.78l9.58,14.18a16,16,0,0,0,11.09,6.9l21.91,3.61,3.8,7.86a16.07,16.07,0,0,0,14.37,9h1.83l-4.35,42.08a87.48,87.48,0,0,1-5.81,1.28A88.14,88.14,0,0,1,40,128Zm87.83,87.91,4.67-45.12a16,16,0,0,0-10.44-16.89L109,149.53l14.25-3.56a16,16,0,0,0,8.23-5.49l7.13-8.56,22.81,3.08,44.71,27.5A87.51,87.51,0,0,1,127.83,215.91Z"/>
              </svg>
            </button>

            <button id="btn-paste" class="icon-circle btn-right-2" title="Paste from clipboard">
              <!-- Phosphor Pen duotone -->
              <svg width="24" height="24" viewBox="0 0 256 256" fill="currentColor">
                <path d="M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z" opacity="0.2"/>
                <path d="M227.32,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31l83.67-83.66,3.48,13.9-36.8,36.79a8,8,0,0,0,11.31,11.32l40-40a8,8,0,0,0,2.11-7.6l-6.9-27.61L227.32,96A16,16,0,0,0,227.32,73.37ZM48,208V179.31L76.69,208Zm48-3.31L51.31,160,136,75.31,180.69,120Zm96-96L147.32,64l24-24L216,84.69Z"/>
              </svg>
            </button>

            <button id="btn-email" class="icon-circle btn-right-3" title="Forward email">
              <!-- Phosphor Envelope duotone -->
              <svg width="24" height="24" viewBox="0 0 256 256" fill="currentColor">
                <path d="M224,56l-96,88L32,56Z" opacity="0.2"/>
                <path d="M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Session history -->
      <div id="results-section" class="results-section hidden">
        <div id="results-list" class="results-list"></div>
      </div>

      <!-- Background processing indicator -->
      <div id="active-processing" class="active-processing hidden">
        <div class="spinner-tiny"></div>
        <span class="processing-label">Processing...</span>
      </div>
    </div>

    <!-- ===== View: Processing ===== -->
    <div id="view-processing" class="view hidden">
      <div class="drop-zone processing">
        <div class="drop-zone-content">
          <div class="spinner-small"></div>
          <p class="drop-zone-text">Processing...</p>
        </div>
      </div>
    </div>

    <!-- ===== View: Feedback ===== -->
    <div id="view-feedback" class="view hidden">
      <!-- Success -->
      <div id="feedback-success" class="feedback-card hidden">
        <!-- Phosphor CheckCircle duotone (success color) -->
        <svg class="feedback-icon feedback-icon-success" width="48" height="48" viewBox="0 0 256 256" fill="currentColor">
          <path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/>
          <path d="M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"/>
        </svg>
        <p id="feedback-title" class="feedback-title"></p>
        <p id="feedback-subtitle" class="feedback-subtitle"></p>
        <button id="btn-open-session" class="btn-cta">
          <!-- Phosphor Drop fill -->
          <svg class="btn-icon" width="18" height="18" viewBox="0 0 256 256" fill="currentColor">
            <path d="M174,47.75a254.19,254.19,0,0,0-41.45-38.3,8,8,0,0,0-9.18,0A254.19,254.19,0,0,0,82,47.75C54.51,79.32,40,112.6,40,144a88,88,0,0,0,176,0C216,112.6,201.49,79.32,174,47.75Z"/>
          </svg>
          See in DropCal
          <!-- Phosphor Link -->
          <svg class="btn-icon" width="16" height="16" viewBox="0 0 256 256" fill="currentColor">
            <path d="M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,16,.45A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"/>
          </svg>
        </button>
        <button id="btn-dismiss-success" class="btn-secondary">Done</button>
      </div>

      <!-- Error -->
      <div id="feedback-error" class="feedback-card hidden">
        <!-- Phosphor WarningCircle duotone (error color) -->
        <svg class="feedback-icon feedback-icon-error" width="48" height="48" viewBox="0 0 256 256" fill="currentColor">
          <path d="M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z" opacity="0.2"/>
          <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z"/>
        </svg>
        <p id="feedback-error-text" class="error-text"></p>
        <button id="btn-dismiss-error" class="btn-secondary">Dismiss</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
